(function(c){c.fn.formatDecimal=function(e,f,d){return b(e,f,d)},c.fn.txtPriceFormat=function(e,d){return this.each(function(){c(this).text(b(c(this).text(),e,d))})},c.fn.txtPriceFormat=function(){c(this).priceFormat();return c(this).val()},c.fn.priceFormat=function(d){var e={prefix:"",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:false,centsLimit:0,clearPrefix:false,clearSufix:false,allowNegative:false,insertPlusSign:false,clearOnEmpty:false};var d=c.extend(e,d);return this.each(function(){var r=c(this);var v="";var C=/[0-9]/;if(r.is("input")){v=r.val()}else{v=r.html()}var w=d.prefix;var h=d.suffix;var u=d.centsSeparator;var f=d.thousandsSeparator;var B=d.limit;var z=d.centsLimit;var g=d.clearPrefix;var q=d.clearSuffix;var p=d.allowNegative;var m=d.insertPlusSign;var x=d.clearOnEmpty;if(m){p=true}function t(F){if(r.is("input")){r.val(F)}else{r.html(F)}}function D(){if(r.is("input")){v=r.val()}else{v=r.html()}return v}function i(H){var G="";for(var F=0;F<(H.length);F++){char_=H.charAt(F);if(G.length==0&&char_==0){char_=false}if(char_&&char_.match(C)){if(B){if(G.length<B){G=G+char_}}else{G=G+char_}}}return G}function E(F){while(F.length<(z+1)){F="0"+F}return F}function k(K,M){if(!M&&(K===""||K==k("0",true))&&x){return""}var I=E(i(K));var J="";var L=0;if(z==0){u="";F=""}var F=I.substr(I.length-z,z);var H=I.substr(0,I.length-z);I=(z==0)?H:H+u+F;if(f||c.trim(f)!=""){for(var G=H.length;G>0;G--){char_=H.substr(G-1,1);L++;if(L%3==0){char_=f+char_}J=char_+J}if(J.substr(0,1)==f){J=J.substring(1,J.length)}I=(z==0)?J:J+u+F}if(p&&(H!=0||F!=0)){if(K.indexOf("-")!=-1&&K.indexOf("+")<K.indexOf("-")){I="-"+I}else{if(!m){I=""+I}else{I="+"+I}}}if(w){I=w+I}if(h){I=I+h}return I}function s(J){var G=(J.keyCode?J.keyCode:J.which);var I=String.fromCharCode(G);var F=false;var K=v;var H=k(K+I);if((G>=48&&G<=57)||(G>=96&&G<=105)){F=true}if(G==8){F=true}if(G==9){F=true}if(G==13){F=true}if(G==46){F=true}if(G==37){F=true}if(G==39){F=true}if(p&&(G==189||G==109||G==173)){F=true}if(m&&(G==187||G==107||G==61)){F=true}if(!F){J.preventDefault();J.stopPropagation();if(K!=H){t(H)}}}function o(){var G=D();var F=k(G);if(G!=F){t(F)}if(parseFloat(G)==0&&x){t("")}}function A(){r.val(w+D())}function l(){r.val(D()+h)}function y(){if(c.trim(w)!=""&&g){var F=D().split(w);t(F[1])}}function j(){if(c.trim(h)!=""&&q){var F=D().split(h);t(F[0])}}r.bind("keydown.price_format",s);r.bind("keyup.price_format",o);r.bind("focusout.price_format",o);if(g){r.bind("focusout.price_format",function(){y()});r.bind("focusin.price_format",function(){A()})}if(q){r.bind("focusout.price_format",function(){j()});r.bind("focusin.price_format",function(){l()})}if(D().length>0){o();y();j()}})};c.fn.unpriceFormat=function(){return c(this).unbind(".price_format")};c.fn.unmask=function(){var g;var d="";if(c(this).is("input")){g=c(this).val()}else{g=c(this).html()}for(var e in g){if(!isNaN(g[e])||g[e]=="-"){d+=g[e]}}return d};var a=function(e){var d=/(^[+-]?\d+)(\d{3})/;var f=e+"";while(d.test(f)){f=f.replace(d,"$1,$2")}return f};var b=function(g,h,d){var f=new RegExp(",","g");var e=g+"";e=e.replace(f,".");if(e==""){e="0"}if(!isNaN(e)){n=parseFloat(e);e=String(parseFloat(n.toFixed(d)));re2=new RegExp("\\.","g");e=e.replace(re2,h);g=a(e)}return g}})(jQuery);