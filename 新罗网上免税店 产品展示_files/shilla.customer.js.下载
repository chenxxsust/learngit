ACC.customer={data:{},init:function(option){with(ACC.customer){data.commonResourcePath=option.commonResourcePath;data.isAnonymous=option.isAnonymous;data.token=option.token;data.loginUrl=option.loginUrl;data.myShillaUrl=option.myShillaUrl;data.goChangeRegularMember=option.goChangeRegularMember;data.signupUrl=option.signupUrl;data.memberType=option.memberType;data.email=option.email;data.goSClubMainUrl=option.goSClubMainUrl;data.goSClubSingUpPopupUrl=option.goSClubSingUpPopupUrl;data.goSClubStayReservePopupUrl=option.goSClubStayReservePopupUrl;data.isRestrictedUseMileage=option.isRestrictedUseMileage}},goMyShillaPage:function(){with(ACC.customer){if(!data.isAnonymous){location.href=data.myShillaUrl}else{openLoginPopup(data.myShillaUrl)}}},goChangeRegularPopup:function(){with(ACC.customer){openRegularInvite(data.goChangeRegularMember)}},goChangeRegularFromNewPopup:function(){with(ACC.customer){openRegularFromNewInvite()}},openLoginPopup:function(goNextUrl,preCallBack,postCallBack){with(ACC.customer){if(!data.isAnonymous){if(data.memberType=="02"){if(goNextUrl.indexOf("/myshilla")!=-1){openRegularInvite(data.goChangeRegularMember)}else{location.href=goNextUrl}}else{location.href=goNextUrl}}else{var loginActionUrl=ACC.customer.data.loginUrl;var isAppend=false;var prefixCallBackParam="?";if(typeof(goNextUrl)!="undefined"&&goNextUrl!=""&&goNextUrl.length!=0){prefixCallBackParam=(isAppend)?"&":"?";loginActionUrl=loginActionUrl+prefixCallBackParam+"nextUrl="+goNextUrl;isAppend=true}else{prefixCallBackParam=(isAppend)?"&":"?";loginActionUrl=loginActionUrl+prefixCallBackParam+"nextUrl="+location.pathname+location.search;isAppend=true}if(typeof(preCallBack)!="undefined"&&preCallBack!=""&&preCallBack.length!=0){prefixCallBackParam=(isAppend)?"&":"?";loginActionUrl=loginActionUrl+prefixCallBackParam+"preCallBack="+preCallBack;isAppend=true}if(typeof(postCallBack)!="undefined"&&postCallBack!=""&&postCallBack.length!=0){prefixCallBackParam=(isAppend)?"&":"?";loginActionUrl=loginActionUrl+prefixCallBackParam+"postCallBack="+postCallBack;isAppend=true}location.href=loginActionUrl}}},openSsoLoginPopup:function(c,b){var a=ACC.customer.data.loginUrl;var d=false;var e="?";if(typeof(c)!="undefined"&&c!=""&&c.length!=0){e=(d)?"&":"?";a=a+e+"nextUrl="+c;d=true}if(typeof(b)!="undefined"&&b!=""&&b.length!=0){e=(d)?"&":"?";a=a+e+"dgType="+b;d=true}location.href=a},openSnsLoginPopup:function(a,d,f){if(isApp&&d=="qq"){spinner.show();$app.common.requestSNSAppLogin("cn","qq",f);return}var b="";var c=false;var e="?";if(typeof(d)!="undefined"&&d!=""&&d.length!=0){e=(c)?"&":"?";b="https://passport.livere.com/v1/auth/"+d+e+"force=true";c=true}if(typeof(f)!="undefined"&&f!=""&&f.length!=0){e=(c)?"&":"?";b=b+e+"redirectUrl="+f;c=true}popup=window.location.replace(b)},bindAll:function(){with(ACC.customer){}},openRegularInvite:function(a){if(confirm("亲爱的顾客,您的附加信息尚未登录。\n在新罗免税店购物和使用” 购物车”时，都需先登录护照信息和附加信息。\n您要现在登录吗?")){location.href=a;return false}else{return false}},openRegularFromNewInvite:function(){if(confirm("输入护照信息以后才可以利用新罗网上免税店。\n请先输入护照信息。")){var b=$("#layer-switching_member_new");location.href=contextPath+"/myshilla/main";if(isHideMobileWebTopGnb&&osName=="android"){var a='shilladfs://setLayerPopup?{"status":"N"}';window.location.href=a}}},openSignup:function(){with(ACC.customer){var protocol=document.location.protocol;var originSignup="//"+document.domain+data.signupUrl;var originSignupUrl=protocol+originSignup;location.href=data.signupUrl}},goSClubMain:function(){with(ACC.customer){AjaxUtil.post(contextPath+"/sclub/ajax/getDaigouCustomerInfo",{},function(result){var isLogin=result.isLogin=="true";var isDaigouCustomer=result.isDaigouCustomer=="true";var daigouNoticeUrl=result.daigouNoticeUrl;var isDaigouLoungeCustomer=result.isDaigouLoungeCustomer=="true";var isDaigouWechatIdExist=result.isDaigouWechatIdExist=="true";var isDaigouLoungeReSignup=result.isDaigouLoungeReSignup=="true";if(!isLogin){openLoginPopup()}else{if(!isDaigouCustomer){if(confirm("很抱歉，您不是购物党使用对象。现在要移动到购物党对象标准通知事项的页面吗?")){location.href=contextPath+daigouNoticeUrl}}else{if(isDaigouLoungeCustomer){location.href=data.goSClubMainUrl}else{console.log("isDaigouLoungeReSignup: "+isDaigouLoungeReSignup+" result: "+result.isDaigouLoungeReSignup);if(isDaigouLoungeReSignup){if(confirm("您要再次加入购物党吗？ ")){AjaxUtil.post(contextPath+"/sclub/ajax/rejoin",{},function(result){log(result);if(result.result){alert("成功加入购物党。");location.href=data.goSClubMainUrl}},function(xhr,status,error){log("Error!");log(xhr+" :: "+status+" :: "+error)})}}else{alert("不属再次加入日期。再次加入日期请在我的新罗内进行确认。")}}}}},function(xhr,status,error){log("Error!");log(xhr+" :: "+status+" :: "+error)})}},goSclubStayReservePopup:function(){with(ACC.customer){location.href=data.goSClubStayReservePopupUrl}}};$(document).ready(function(){ACC.customer.bindAll()});